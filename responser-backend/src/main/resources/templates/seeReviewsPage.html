<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/pageLayout(pageClass='reviews', activeNavigation='reviews')}"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reviewly - All reviews</title>


    <link th:href="@{/css/seeReviewsPage.css}" rel="stylesheet"/>
    <link th:href="@{/css/nouislider.min.css}" rel="stylesheet"/>

    <script type="text/javascript" th:src="@{/js/nouislider.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/seeReviewsPage.js}"></script>
</head>
<body>
    <div class="page-content" layout:fragment="page-content">
        <section class="section">
            <h1 class="section-header">Reviews</h1>

            <form method="GET" id="criteria-form" th:action="${T(com.responser.backend.controller.reviews.ReviewsController).REVIEWS_URL + T(com.responser.backend.controller.reviews.ReviewsController).SEE_REVIEWS_URL}">
                <div class="field-container">
                    <div class="input-container">
                        <input class="field-input" type="text" placeholder="Enter URL" th:value="${criteria.searchUrl != null ? criteria.searchUrl : ''}">
                        <button class="button primary" type="submit">
                            <svg class="icon search" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                      d="M1.05664 4.50652C1.05664 2.60174 2.60077 1.05762 4.50555 1.05762C6.41032 1.05762 7.95445 2.60174 7.95445 4.50652C7.95445 5.43688 7.58607 6.28121 6.98721 6.90158C6.97161 6.91384 6.95658 6.92716 6.9422 6.94154C6.92775 6.95599 6.91437 6.97111 6.90206 6.98679C6.28155 7.58647 5.43663 7.95543 4.50555 7.95543C2.60077 7.95543 1.05664 6.4113 1.05664 4.50652ZM7.27894 7.98539C6.5184 8.5925 5.55435 8.95543 4.50555 8.95543C2.04848 8.95543 0.0566406 6.96358 0.0566406 4.50652C0.0566406 2.04946 2.04848 0.0576172 4.50555 0.0576172C6.96261 0.0576172 8.95445 2.04946 8.95445 4.50652C8.95445 5.5545 8.59211 6.51784 7.98586 7.2781L9.79652 9.08876C9.99179 9.28402 9.99179 9.6006 9.79652 9.79587C9.60126 9.99113 9.28468 9.99113 9.08942 9.79587L7.27894 7.98539Z"
                                      fill="black" fill-opacity="0.6"/>
                            </svg>
                            Search
                        </button>
                    </div>
                </div>

                <div class="sorting-filter-container">
                    <button class="open-sorting" data-dropdown-trigger="dropdown-trigger" data-dropdown-id="sorting-container" data-dropdown-activation-id="blur-panel-1"
                            type="button">
                        New ones first
                        <svg class="icon arrow down" xmlns="http://www.w3.org/2000/svg" width="12" height="6" viewBox="0 0 12 6" fill="none">
                            <path d="M1.5 0.75L6 5.25L10.5 0.75" stroke="black" stroke-opacity="0.4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>

                    <div class="dropdown-menu-container sorting" id="sorting-container">
                        <div class="dropdown-menu">
                            <p class="menu-group-header">Rating</p>
                            <div class="field-group">
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).RATING.name}" data-sort-direction="DESC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).RATING && criteria.sortDirection.name == 'DESC'}"/>
                                    <span>High rating first</span>
                                </label>
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).RATING.name}" data-sort-direction="ASC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).RATING && criteria.sortDirection.name == 'ASC'}"/>
                                    <span>Low rating first</span>
                                </label>
                            </div>

                            <p class="menu-group-header">Date</p>
                            <div class="field-group">
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).CREATION_DATE.name}" data-sort-direction="DESC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).CREATION_DATE && criteria.sortDirection.name == 'DESC'}"/>
                                    <span>New first</span>
                                </label>
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).CREATION_DATE.name}" data-sort-direction="ASC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).CREATION_DATE && criteria.sortDirection.name == 'ASC'}"/>
                                    <span>Old first</span>
                                </label>
                            </div>

                            <p class="menu-group-header">Popularity</p>
                            <div class="field-group">
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).POPULARITY.name}" data-sort-direction="DESC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).POPULARITY && criteria.sortDirection.name == 'DESC'}"/>
                                    <span>Popular first</span>
                                </label>
                                <label class="field radio-button">
                                    <input type="radio" name="sortingField" th:value="${T(com.responser.backend.model.ReviewsCriteriaSortingField).POPULARITY.name}" data-sort-direction="ASC"
                                           th:checked="${criteria.sortingField == T(com.responser.backend.model.ReviewsCriteriaSortingField).POPULARITY && criteria.sortDirection.name == 'ASC'}"/>
                                    <span>Unpopular first</span>
                                </label>
                            </div>

                            <input type="text" name="sortDirection" th:value="${criteria.sortDirection}" hidden="hidden">

                            <button class="button primary small" type="submit">Apply</button>
                        </div>
                    </div>

                    <button class="open-filter" data-dropdown-trigger="dropdown-trigger" data-dropdown-id="filter-container" data-dropdown-activation-id="blur-panel-2" type="button">
                        Filters
                        <svg class="icon filter" xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18" fill="none">
                            <path d="M13.136 14.4546H8.36328" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5.63601 14.4546H0.863281" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.1364 9H7" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4.27237 9H0.863281" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.1357 3.54541H9.72656" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6.99964 3.54541L0.863281 3.54541" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.36328 16.5V12.4091" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M4.27344 11.0454V6.9545" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9.72656 5.59082V1.49991" stroke="black" stroke-opacity="0.4" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>

                    <div class="dropdown-menu-container filter" id="filter-container" data-dropdown-position="right">
                        <div class="dropdown-menu">
                            <p class="menu-group-header">Review type</p>
                            <div class="field-group">
                                <label class="field radio-button">
                                    <input type="radio" name="resourceType" th:value="${T(com.responser.backend.model.ReviewsCriteriaResourceType).SITE.name}"
                                           th:checked="${criteria.resourceType == T(com.responser.backend.model.ReviewsCriteriaResourceType).SITE}"/>
                                    <span>Site</span>
                                </label>
                                <label class="field radio-button">
                                    <input type="radio" name="resourceType" th:value="${T(com.responser.backend.model.ReviewsCriteriaResourceType).PAGE.name}"
                                           th:checked="${criteria.resourceType == T(com.responser.backend.model.ReviewsCriteriaResourceType).PAGE}"/>
                                    <span>Page</span>
                                </label>
                                <label class="field radio-button">
                                    <input type="radio" name="resourceType" value=""
                                           th:checked="${criteria.resourceType == T(com.responser.backend.model.ReviewsCriteriaResourceType).ALL}"/>
                                    <span>All</span>
                                </label>
                            </div>

                            <p class="menu-group-header">Rating</p>
                            <div class="rating-range-labels-container">
                                <div class="rating-label min-rating-label">
                                    <input type="number" name="minRating" th:value="${criteria.minRating != null ? criteria.minRating : 0}" hidden="hidden">
                                    <span class="prefix">from</span>
                                    <svg class="icon star" xmlns="http://www.w3.org/2000/svg" width="10" height="11" viewBox="0 0 10 11" fill="none">
                                        <path
                                            d="M4.51454 1.16393C4.66717 0.693405 5.33283 0.693405 5.48546 1.16393L6.31546 3.72264C6.38371 3.93304 6.57973 4.07553 6.80093 4.07553H9.48866C9.98285 4.07553 10.1886 4.70776 9.78897 4.99855L7.61309 6.58204C7.43451 6.712 7.35979 6.94209 7.42794 7.15217L8.25871 9.71325C8.41128 10.1836 7.87275 10.5743 7.47293 10.2834L5.30031 8.70226C5.1213 8.57198 4.8787 8.57198 4.69969 8.70226L2.52707 10.2834C2.12725 10.5743 1.58872 10.1836 1.74129 9.71325L2.57206 7.15217C2.64021 6.94209 2.56549 6.712 2.38691 6.58204L0.211034 4.99855C-0.188552 4.70776 0.0171457 4.07553 0.511344 4.07553H3.19907C3.42027 4.07553 3.61629 3.93304 3.68454 3.72264L4.51454 1.16393Z"
                                            fill="#D6DE73"/>
                                    </svg>
                                    <span class="value" id="min-rating-value">! ERROR !</span>
                                </div>
                                <div class="rating-label max-rating-label">
                                    <input type="number" name="maxRating" th:value="${criteria.maxRating != null ? criteria.maxRating : 5}" hidden="hidden">
                                    <span class="prefix">to</span>
                                    <svg class="icon star" xmlns="http://www.w3.org/2000/svg" width="10" height="11" viewBox="0 0 10 11" fill="none">
                                        <path
                                            d="M4.51454 1.16393C4.66717 0.693405 5.33283 0.693405 5.48546 1.16393L6.31546 3.72264C6.38371 3.93304 6.57973 4.07553 6.80093 4.07553H9.48866C9.98285 4.07553 10.1886 4.70776 9.78897 4.99855L7.61309 6.58204C7.43451 6.712 7.35979 6.94209 7.42794 7.15217L8.25871 9.71325C8.41128 10.1836 7.87275 10.5743 7.47293 10.2834L5.30031 8.70226C5.1213 8.57198 4.8787 8.57198 4.69969 8.70226L2.52707 10.2834C2.12725 10.5743 1.58872 10.1836 1.74129 9.71325L2.57206 7.15217C2.64021 6.94209 2.56549 6.712 2.38691 6.58204L0.211034 4.99855C-0.188552 4.70776 0.0171457 4.07553 0.511344 4.07553H3.19907C3.42027 4.07553 3.61629 3.93304 3.68454 3.72264L4.51454 1.16393Z"
                                            fill="#D6DE73"/>
                                    </svg>
                                    <span class="value" id="max-rating-value">! ERROR !</span>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div id="slider" class="slider"></div>
                            </div>
                            <button class="button primary small" type="submit">Apply</button>
                        </div>
                    </div>
                </div>
            </form>

            <div class="reviews-container">
                <div class="cards-container">
                    <div class="no-data" th:if="${reviews.currentPageSize == 0}">
                        <span class="no-data-text">
                            No reviews.
                            <br>
                            Try to change filter settings.
                        </span>
                    </div>

                    <th:block th:each="review, loopState: ${reviews.data}">
                        <th:block th:replace="~{components/review-card::review-card(review=${review})}"/>
                    </th:block>
                </div>

                <div class="blur-panel" id="blur-panel-1"></div>
                <div class="blur-panel" id="blur-panel-2"></div>
            </div>

            <div class="pagination">
                <div class="button-container previous">
                    <button class="button previous-button" type="submit" name="page" form="criteria-form" th:classappend="${!reviews.hasPrevious ? 'disabled' : ''}"
                            th:value="${reviews.hasPrevious ? (reviews.currentPageNumber - 1) : ''}" th:disabled="${!reviews.hasPrevious}">
                        <svg class="icon arrow-left" xmlns="http://www.w3.org/2000/svg" width="6" height="11" viewBox="0 0 6 11" fill="none">
                            <path d="M5.25 10.0005L0.75 5.50049L5.25 1.00049" stroke="black" stroke-opacity="0.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Previous
                    </button>
                </div>
                <div class="pages-container">
                    <!-- // TODO: Realize paging navigation -->
                    <!--<button class="button page-button">1</button>
                    <span class="pages-placeholder">...</span>
                    <button class="button page-button">3</button>
                    <button class="button page-button active">4</button>
                    <button class="button page-button">5</button>
                    <span class="pages-placeholder">...</span>
                    <button class="button page-button">10</button>-->
                </div>
                <div class="button-container next">
                    <button class="button next-button" type="submit" name="page" form="criteria-form" th:classappend="${!reviews.hasNext ? 'disabled' : ''}"
                            th:value="${reviews.hasNext ? (reviews.currentPageNumber + 1) : ''}" th:disabled="${!reviews.hasNext}">
                        Next
                        <svg class="icon arrow-right" xmlns="http://www.w3.org/2000/svg" width="6" height="11" viewBox="0 0 6 11" fill="none">
                            <path d="M0.75 10.0005L5.25 5.50049L0.75 1.00049" stroke="black" stroke-opacity="0.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <div id="share-review-modal" class="modal-container share-review-modal">
            <div class="modal">
                <div class="modal-body">
                    <input id="share-review-link-value" type="text" hidden="hidden">

                    <button id="close-share-review-modal" class="close-modal" th:onclick="closeShareModal()">
                        <svg width="1em" height="1em" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon close">
                            <path d="m7.5.5-7 7M.5.5l7 7" stroke="#000" stroke-opacity="0.6" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>

                    <div class="share-buttons">
                        <div class="share-row first-row">
                            <button class="button primary share-button" th:onclick="shareFB()">
                                <svg viewBox="0 0 15.5 30" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon fb-logo">
                                    <path d="M10.1 30V16.3h4.6l.7-5.3h-5.3V7.6c0-1.5.4-2.6 2.6-2.6h2.8V.2C15 .1 13.3 0 11.4 0 7.3 0 4.5 2.5 4.5 7v4H0v5.3h4.6V30Z" fill="#fff"></path>
                                </svg>
                            </button>

                            <button class="react-share__ShareButton button primary share-button" th:onclick="shareX()">
                                <svg viewBox="0 0 32.36 29.25" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon x-logo">
                                    <path d="M25.485 0h4.962l-10.84 12.39 12.752 16.86h-9.985l-7.821-10.226L5.604 29.25H.639l11.595-13.252L0 0h10.239l7.07 9.347zm-1.741 26.28h2.749L8.745 2.814h-2.95Z" fill="#fff"></path>
                                </svg>
                            </button>

                            <button class="react-share__ShareButton button primary share-button" th:onclick="shareTG()">
                                <svg viewBox="0 0 41.543 35.352" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon tg-logo">
                                    <path d="M38.416.003a4.302 4.302 0 0 0-1.962.413c-.85.326-8.64 3.34-16.523 6.391-3.969 1.533-7.934 3.066-10.986 4.241a777.434 777.434 0 0 1-5.468 2.093c-.808.281-1.9.636-2.827 1.728a2.638 2.638 0 0 0-.588 1.103 2.436 2.436 0 0 0 .167 1.571c.465.961 1.253 1.358 2.184 1.714 3.09.99 6.286 1.935 8.933 2.824a785.712 785.712 0 0 1 2.84 10.343c.306.691.972.948 1.658.955l-.003.035s.539.053 1.064-.074c.527-.123 1.189-.428 1.791-.992.662-.622 2.459-2.388 3.477-3.385l7.674 5.664.061.035s.85.597 2.093.682c.622.042 1.44-.078 2.142-.592.708-.516 1.177-1.347 1.396-2.295.657-2.862 5.01-23.578 5.753-27.007l-.021.08c.52-1.93.328-3.7-.871-4.75a3.174 3.174 0 0 0-1.984-.779v.002zm-.207 3.29c.047.045.043.045.003.048-.012-.003.14.207-.158 1.326l-.012.042-.01.039c-.758 3.506-5.155 24.408-5.741 26.964-.08.345-.114.32-.095.299-.176-.026-.5-.165-.527-.176l-13.134-9.701c4.498-4.332 9.1-8.254 13.744-12.433.821-.412.684-1.685-.299-1.707-1.043.246-1.923.996-2.88 1.475-5.5 3.263-11.119 6.132-16.559 9.493-2.792-.97-5.578-1.777-8.152-2.576 2.233-.895 4.008-1.556 5.756-2.23 3.051-1.176 7.016-2.704 10.985-4.24 7.94-3.07 15.927-6.164 16.62-6.43l.056-.024.053-.023a.963.963 0 0 1 .355-.1s-.018-.058-.004-.045h-.001zM17.29 25.359l2.167 1.601c-.934.913-1.817 1.774-2.455 2.388l.288-3.99" fill="#fff"></path>
                                </svg>
                            </button>
                        </div>

                        <div class="share-row second-row">
                            <button class="react-share__ShareButton button primary share-button" th:onclick="shareLI()">
                                <svg viewBox="0 0 26 26" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon li-logo">
                                    <path d="M.4 26h5.4V8.6H.4ZM3.1 0C1.4 0 0 1.4 0 3.1c0 1.7 1.4 3.1 3.1 3.1 1.7 0 3.1-1.4 3.1-3.1C6.2 1.4 4.8 0 3.1 0Zm16.4 8.2c-2.6 0-4.4 1.4-5.1 2.8h-.1V8.6H9.1V26h5.4v-8.6c0-2.3.4-4.5 3.2-4.5 2.8 0 2.8 2.6 2.8 4.6V26H26v-9.5c0-4.7-1-8.3-6.5-8.3Z" fill="#fff"></path>
                                </svg>
                            </button>

                            <button class="react-share__ShareButton button primary share-button" th:onclick="shareReddit()">
                                <svg viewBox="0 0 42.626 37.88" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon reddit-logo">
                                    <path d="M42.626 19.223a4.67 4.67 0 0 0-7.903-3.199 22.771 22.771 0 0 0-12.32-3.937l2.078-9.985 6.848 1.442a3.199 3.199 0 0 0 3.02 2.851 3.2 3.2 0 1 0-2.602-4.805L23.907.024a.985.985 0 0 0-.754.137.978.978 0 0 0-.43.629l-2.37 11.105a22.801 22.801 0 0 0-12.477 3.938 4.672 4.672 0 1 0-5.152 7.648c-.04.469-.04.938 0 1.406 0 7.168 8.35 12.993 18.655 12.993 10.301 0 18.657-5.825 18.657-12.993a9.387 9.387 0 0 0 0-1.406 4.68 4.68 0 0 0 2.59-4.258zm-32 3.2a3.198 3.198 0 1 1 6.398 0c0 1.769-1.43 3.199-3.2 3.199-1.765 0-3.198-1.43-3.198-3.2zm18.593 8.8a12.304 12.304 0 0 1-7.906 2.465 12.286 12.286 0 0 1-7.902-2.465.868.868 0 0 1 .054-1.16.868.868 0 0 1 1.16-.055 10.482 10.482 0 0 0 6.657 2.016 10.491 10.491 0 0 0 6.687-1.953.898.898 0 0 1 1.266.016.898.898 0 0 1-.016 1.265zm-.578-5.472a3.2 3.2 0 0 1-3.2-3.2 3.198 3.198 0 1 1 6.398 0 3.202 3.202 0 0 1-3.23 3.328zm0 0" fill="#fff"></path>
                                </svg>
                            </button>

                            <button class="react-share__ShareButton button primary share-button" th:onclick="shareVK()">
                                <svg viewBox="0 0 42.887 25.015" width="1em" height="1em" xmlns="http://www.w3.org/2000/svg" class="icon vk-logo">
                                    <path d="M34.85 25.015h-.2c-2.17-.36-3.66-1.92-4.92-3.37-.72-.81-1.82-2.66-3.12-2.47-1.85.3-.93 3.52-1.71 4.9-.62 1.11-3.29.91-5.12.71-5.79-.62-8.75-3.77-11.35-7.14a64.13 64.13 0 0 1-6.92-11.47A10.59 10.59 0 0 1 0 1.685c.91-.81 2.47-.51 4.02-.51 1.31 0 3.36-.29 4.32.2.57.26 1.14 1.8 1.57 2.8a37.18 37.18 0 0 0 3.31 5.82c.56.81 1.41 2.35 2.41 2.14 1-.21 1.06-2.63 1.1-4.18 0-1.77 0-4-.5-4.9-.5-.9-1.32-.88-2.17-1.41.73-1.49 2.72-1.63 5.12-1.63 2 0 4.84-.23 5.62 1.12.78 1.35.25 3.85.2 5.71-.06 2.09-.41 4.25 1 5.21 1.09-.12 1.68-1.2 2.31-2a28 28 0 0 0 3.32-5.88c.44-1 .91-2.65 1.71-3 1.21-.47 3.15-.1 4.92-.1 1.46 0 4.05-.41 4.52.61.39.85-.75 3-1.1 3.57a61.88 61.88 0 0 1-4.12 5.61c-.58.78-1.78 2-1.71 3.27.05.94 1 1.67 1.71 2.35a33.12 33.12 0 0 1 3.92 4.18c.47.62 1.5 2 1.4 2.76-.31 2.56-6.09.99-8.03 1.59z" fill="#fff"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>